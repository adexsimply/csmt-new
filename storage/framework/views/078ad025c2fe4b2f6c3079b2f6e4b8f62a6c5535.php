<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ACADEMIC MASTER SHEET | CSMT Schools</title>
  <link href='http://fonts.googleapis.com/css?family=Michroma' rel='stylesheet' type='text/css'>
  <link href="<?php echo e(asset('bower_components/bootstrap/bootstrap.css')); ?>" rel='stylesheet' type='text/css'>
  <style type="text/css">
    html, body {
      margin: 0;
      padding: 0;
    }
    
    .main-top {
      background-color: #fff;
      padding: 15px 20px;
    }
    .main-top img {
      width: 120px;
      float: left;
      height: 90px;
    }
    .main-top div {
      //width: 70%;
      text-align: center;
      margin: auto;
    }
    .main-top h1 {
      margin: 0;
      font-size: 30px;
      font-family: "Times New Roman", Times, serif;
      text-transform: uppercase;
      font-weight: bold;
      color: blue;
    }
    .main-top h2 {
      margin-bottom: 0;
      margin-left: 25px;
      font-size:23px;
      font-family: 'Sakkal Majalla', bold;
      letter-spacing: 0.5px;
      color: blue;
      font-weight: bold;
      line-height: 10px;
    }
    .main-top p {
      font-family: 'Sakkal Majalla', bold;
      margin: 0;
      font-size: 20px;
      font-weight: bold;
      line-height: 20px;
    }

    .input {
      font-family: 'Courier New', monospace;
      text-transform: uppercase;
    }
    .main td{
      font-family: 'Sakkal Majalla', bold;
      font-size: 16px;
      line-height: 1px;
      letter-spacing: 1px;
    }
    .blue-st {
      color: blue;
    } 
    .blue-com {
      font-family: "Comic Sans MS", cursive, sans-serif;
      text-transform: uppercase;
      font-size: 13px;
      color: blue;
    } 
    .blue-subj {
      color: blue !important;
    } 
.panel-heading {
   background-color:#6A0691 !important;
   //box-shadow: 5px 5px 5px black;
}
.panel-heading h4{
   color:yellow !important;
  font-family: 'Sakkal Majalla', bold !important;
  font-weight: bold;
  font-size: 17px;
  text-align: center;
  line-height: 5px;
}
.bold-font {
  font-weight: bold;
}
p{
  font-family: 'Sakkal Majalla', bold !important; 
  font-size: 15px;
}
.table-bordered > thead > tr > th,
.table-bordered > tbody > tr > th,
.table-bordered > tfoot > tr > th,
.table-bordered > thead > tr > td,
.table-bordered > tbody > tr > td,
.table-bordered > tfoot > tr > td {
  border: 1px solid black !important;
  padding: 4px;
}
    
  </style>
    <style type="text/css" media="print">
    @page  
    {
        size: auto;   /* auto is the initial value */
        margin: 1mm;  /* this affects the margin in the printer settings */
        margin-top: 20px;
        margin-bottom: 10px;
        margin-right: 15px;
    }
    .main-top img {
      width: 120px;
      float: left;
      height: 90px;
    }
    .main-top div {
      //width: 70%;
      text-align: center;
      margin: auto;
    }
    .main-top h1 {
      margin: 0;
      font-size: 30px;
      font-family: "Times New Roman", Times, serif;
      text-transform: uppercase;
      font-weight: bold;
      color: blue !important;
    }
.bold-font {
  font-weight: bold;
}
    .main-top h2 {
      margin-bottom: 0;
      font-size:23px;
      font-family: 'Sakkal Majalla', bold;
      letter-spacing: 0.5px;
      color: blue !important;
      font-weight: bold;
      line-height: 10px;
    }
    .main-top p {
      font-family: 'Sakkal Majalla', bold !important;
      margin: 0;
      font-size: 20px;
      font-weight: bold;
      line-height: 20px;
    }

    .input {
      font-family: 'Courier New', monospace;
      text-transform: uppercase;
    }
    .main td{
      font-family: 'Sakkal Majalla', bold;
      font-size: 15px;
      line-height: 0.5px;
      letter-spacing: 0.001px;
      border: 1px solid black;
      padding: 1px;
    }
    
    .blue-st {
      color: blue !important;
    } 
    .blue-com {
      font-family: "Comic Sans MS", sans-serif;
      font-size: 1px;
      text-transform: uppercase;
      color: blue !important;
    } 
    .blue-subj {
      color: blue !important;
    } 
.panel-heading {
   background-color:#6A0691 !important;
   //box-shadow: 10px 10px 5px #888888;
}
.panel-heading h4{
   color:yellow !important;
  font-family: 'Sakkal Majalla', bold !important;
  font-weight: bold;
  font-size: 17px;
  text-align: center;
  line-height: 5px;
}
.table-bordered > thead > tr > th,
.table-bordered > tbody > tr > th,
.table-bordered > tfoot > tr > th,
.table-bordered > thead > tr > td,
.table-bordered > tbody > tr > td,
.table-bordered > tfoot > tr > td {
  border: 1px solid black !important;
  padding: 4px;
}
 body 
    {
        background-color:#FFFFFF; 
        border: solid 0px black ;
        margin: 1px;  /* this affects the margin on the content before sending to printer */

   }
</style>
</head>
<body>
  <div class="page" style="padding:25px;">
    <div class="main-top">
      <div>
      <img src="<?php echo e(asset('storage/images/logo-lg.jpg')); ?>" width="300px">
        <h1>CSMT Staff Secondary School</h1>
        
        <p>Along Watchman Street, P.M.B. 147, Abakaliki, Ebonyi State, Nigeria<br>
        <strong>Email:</strong> csmtschools@gmail.com  <strong>Tel:</strong> 08032124870, 07060725882</p>
        <h2 style="margin-top:12px;margin-left:55px;">ACADEMIC MASTER SHEET</h2>
      </div>
    </div>
<div class="panel"> 
  <div class="example-box-wrapper">
      <table class="table table-bordered table-condensed" style="margin-top:-10px;">
        <tbody>
            <tr>
              <td><strong>Term:&nbsp;</strong><strong class="blue-st"><?php echo e(App\Term::find($term_id)->name); ?></strong></td>
              <td><strong>Class:&nbsp;</strong><strong class="blue-st">
                      <?php echo App\Aagc::name($aagc_id); ?> <?php echo e(App\Student::categoryName($category_id)); ?></strong></td>
              <td><strong>Session:&nbsp;</strong><?php echo e(App\Session::find($session_id)->name); ?><strong class="blue-st"></strong></td>
            </tr>
        </tbody>
      </table>

          <div class="content-i">
            <div class="content-box">
                <div class="element-wrapper">
                    <div class="element-box">


                     
                     <?php if( Addon::isEmpty($students)): ?>
                        <table class='table table-bordered' border='1'>
                            <thead>
                                <tr>
                                    <th>S/N</th>
                                    <th>Students' ID</th>
                                    <th class="text-left">Name</th>
                                    <?php $__currentLoopData = $subjects; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $subject): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?>

                                    <?php $subject_name = $subject->name;
                                    if ($subject_name=='AGRICULTURAL SCIENCE') {
                                      $subject_name = 'AGRIC';
                                    }
                                    else if($subject_name=='BASIC SCIENCE') {
                                      $subject_name = 'B.SCI';
                                    }
                                    else if($subject_name=='BASIC TECHNOLOGY') {
                                      $subject_name = 'B.TECH';
                                    }
                                    else if($subject_name=='BIOLOGY') {
                                      $subject_name = 'BIO';
                                    }
                                    else if($subject_name=='BUSINESS STUDIES') {
                                      $subject_name = 'BUSI';
                                    }
                                    else if($subject_name=='C.C ARTS') {
                                      $subject_name = 'C.ART';
                                    }
                                    else if($subject_name=='CATERING') {
                                      $subject_name = 'CAT';
                                    }
                                    else if($subject_name=='CHEMISTRY') {
                                      $subject_name = 'CHM';
                                    }
                                    else if($subject_name=='CHRISTIAN RELIGIOUS STUDIES') {
                                      $subject_name = 'CRS';
                                    }
                                    else if($subject_name=='CIVIC EDUCATION') {
                                      $subject_name = 'CIVIC';
                                    }
                                    else if($subject_name=='COMMERCE') {
                                      $subject_name = 'COMM';
                                    }
                                    else if($subject_name=='DATA PROCESSING') {
                                      $subject_name = 'DATA';
                                    }
                                    else if($subject_name=='ECONOMICS') {
                                      $subject_name = 'ECO';
                                    }
                                    else if($subject_name=='ENGLISH LANGUAGE') {
                                      $subject_name = 'ENG';
                                    }
                                    else if($subject_name=='FRENCH') {
                                      $subject_name = 'FRE';
                                    }
                                    else if($subject_name=='FURTHER MATHEMATICS') {
                                      $subject_name = 'FMTH';
                                    }
                                    else if($subject_name=='GEOGRAPHY') {
                                      $subject_name = 'GEO';
                                    }
                                    else if($subject_name=='GOVERNMENT') {
                                      $subject_name = 'GOV';
                                    }
                                    else if($subject_name=='GRAMMAR') {
                                      $subject_name = 'GRM';
                                    }
                                    else if($subject_name=='HOME ECONOMICS') {
                                      $subject_name = 'HOME';
                                    }
                                    else if($subject_name=='IGBO LANGUAGE') {
                                      $subject_name = 'IGBO';
                                    }
                                    else if($subject_name=='INFORMATION TECHNOLOGY') {
                                      $subject_name = 'ICT';
                                    }
                                    else if($subject_name=='LITERATURE IN ENGLISH') {
                                      $subject_name = 'LIT';
                                    }
                                    else if($subject_name=='MATHEMATICS') {
                                      $subject_name = 'MTH';
                                    }
                                    else if($subject_name=='PHONETICS') {
                                      $subject_name = 'PHON';
                                    }
                                    else if($subject_name=='PHYSICAL AND HEALTH EDUCATION') {
                                      $subject_name = 'PHE';
                                    }
                                    else if($subject_name=='PHYSICS') {
                                      $subject_name = 'PHY';
                                    }
                                    else if($subject_name=='SECURITY EDUCATION') {
                                      $subject_name = 'SEC';
                                    }
                                    else if($subject_name=='SOCIAL STUDIES') {
                                      $subject_name = 'SOC';
                                    }
                                    else if($subject_name=='TECHNICAL DRAWING') {
                                      $subject_name = 'T.D';
                                    }
                                    else if($subject_name=='VISUAL ARTS') {
                                      $subject_name = 'VIS';
                                    }
                                     ?>
                                      <th style="max-width: 50px;"><?php echo e($subject_name); ?></th>
                                    <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                              <?php
                                  $previousScore=0;
                                  $position = 0;
                               ?>
                              <?php $__currentLoopData = $students; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $x => $student): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?>
                                <?php 
                                      
                                      if($x == 0){
                                        $position= $x +1;
                                        $previousScore = $student->gp; 
                                      }

                                      else {

                                        if($previousScore == $student->gp){
                                          
                                          $previousScore = $student->gp;
                                        }
                                        else{
                                          $position = $x + 1;
                                          $previousScore = $student->gp;
                                        }

                                      }


                                  ?>
                                <tr>
                                  <td><?php echo e($x+1); ?></td>
                                  <td><?php echo e($student->admission_no); ?></td>
                                  <td class="text-left"><?php echo e($student->surname.' '.$student->othernames); ?></td>

                                  <?php $total=0 ?>

                                  <?php $__currentLoopData = $subjects; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $subject): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?>
                                    <td>

                                      <?php
                                        $score =  App\Assessment::cumCatStupidLoading($subject->id,$student->id,$aagc_id,$session_id,$term_id);

                                        $total+=$score;
                                      ?>

                                      <?php echo e($score); ?>


                                    </td>
                                  <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?>

                                  <td><?php echo e($total); ?></td>
                                </tr>

                              <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?>
                                
                            </tbody>
                              

                        </table>

                   
                      <?php else: ?> 
                        <h3 class="text-center">No assessment found!</h3>
                      <?php endif; ?>
                    
                    </div>
                </div>
              

              
            </div>
          </div>
<?php

    $group_class_id = App\Aagc::find($aagc_id)->group_class->id;

?>


<?php $__env->startSection('script'); ?>
  

  <script type="text/javascript">
    $(document).ready(function(){


      $('.dataTableFull').DataTable({
      // "processing": true,
      // "ajax": 'server.php',
      "dom": 'lBfrtip',
      // "pageLength": 100,
      "bPaginate": false,
      // "responsive": true,
      "fixedHeader": true,
      "buttons": [
            {
                extend: 'collection',
                text: 'Export',
                buttons: [
                    'excel',
                    'csv',
                    'pdf',
                    'print'
                ]
            }
        ]

    });


      $(".moreOption").click(function(e){
        e.preventDefault();
        sessionOptions('<?php echo e($session_id); ?>');
        termOptions('<?php echo e($term_id); ?>');
        classOptions('<?php echo e($group_class_id); ?>');
        fullArmOptions('<?php echo e($group_class_id); ?>','<?php echo e($aagc_id); ?>');


        $(".classOptions").change(function(){
          var group_class_id = $(this).val();
          fullArmOptions(group_class_id);
        });
  

        $("#moreOption").modal('show');
      });

    });
  </script>
<?php $__env->stopSection(); ?>




